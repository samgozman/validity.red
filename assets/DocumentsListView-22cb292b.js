import{d as n,o as r,c as m,m as w,a as o,b as a,i as h,u as l,R as g,t as i,w as c,f as u,C as v,E as _,h as p,j as b,k as D,F as f,r as M,D as y,S as C}from"./index-ca8ec35b.js";import{_ as $}from"./ModalConfirmation.vue_vue_type_script_setup_true_lang-76217ee7.js";import{D as x}from"./DocumentType-69b8dd92.js";import{D as k}from"./DocumentService-9ed7368b.js";const A={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},I=w('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6),E=[I],L=n({name:"TrashOutline",render:function(e,s){return r(),m("svg",A,E)}}),j={class:"flex-row items-center space-x-4 card-body"},V={class:"flex-1 w-[80%]"},N={class:"text-base-content text-opacity-80 truncate"},S={class:"text-base-content text-opacity-40"},B=["href"],R=n({data(){return{isHovering:!1,deleteAnchor:"",deleteModalId:"",documentLink:"",errorMsg:""}},methods:{setContext(){this.deleteAnchor=`#delete-${this.document.ID}`,this.deleteModalId=`delete-${this.document.ID}`,this.documentLink=`documents/${this.document.ID}`},async deleteDocument(){this.errorMsg="";try{await k.deleteOne(this.document.ID),this.$router.push("/documents"),this.$emit("refreshDocumentsEvent")}catch(t){this.errorMsg=await _.decode(t)}}},beforeMount(){this.setContext()}}),H=n({...R,__name:"DocumentListItem",props:{document:null},setup(t){return(e,s)=>(r(),m("div",{class:"card shadow-lg compact bg-base-100",onMouseover:s[0]||(s[0]=d=>e.isHovering=!0),onMouseout:s[1]||(s[1]=d=>e.isHovering=!1)},[o("div",j,[o("div",V,[a(l(g),{to:e.documentLink,class:"card-title text-primary"},{default:h(()=>[(r(),p(b(l(x).getIcon(t.document.type)),{class:"w-5 text-base-content"})),D(" "+i(t.document.title),1)]),_:1},8,["to"]),o("p",N,i(t.document.description),1),c(o("p",{class:"badge badge-error badge-outline w-full"}," Error: "+i(e.errorMsg),513),[[u,e.errorMsg]]),o("p",S,i(t.document.expiresAt),1)]),o("div",{class:v(["flex space-x-2 flex-0",{"opacity-0":!e.isHovering}])},[o("a",{href:e.deleteAnchor,class:"btn btn-sm btn-circle"},[a(l(L),{class:"w-5"})],8,B)],2)]),a($,{modalId:e.deleteModalId,message:"Are you sure that you want to delete this document:",actionName:t.document.title,onConfirmEvent:e.deleteDocument},null,8,["modalId","actionName","onConfirmEvent"])],32))}}),O={class:"grid grid-cols-1 gap-6 py-6 lg:p-10 md:grid-cols-2 xl:grid-cols-3 lg:bg-base-200 rounded-box"},T={class:"grid items-center justify-items-center h-full"},F=o("span",{class:"lg:block"},"Add first document",-1),z=n({data(){return{documents:[],isDocumentsAvailable:!0,errorMsg:""}},methods:{async refresh(){this.errorMsg="";try{const t=await k.getAll();this.documents=t,this.isDocumentsAvailable=t.length>0}catch(t){this.errorMsg=await _.decode(t)}}},beforeMount(){this.refresh()}}),q=n({...z,__name:"DocumentsList",setup(t){return(e,s)=>(r(),m(f,null,[c(o("div",{class:"badge badge-error badge-outline w-full"}," Error: "+i(e.errorMsg),513),[[u,e.errorMsg]]),c(o("div",O,[(r(!0),m(f,null,M(e.documents,d=>(r(),p(H,{key:d.ID,document:d,onRefreshDocumentsEvent:e.refresh},null,8,["document","onRefreshDocumentsEvent"]))),128))],512),[[u,e.isDocumentsAvailable]]),c(o("div",T,[a(l(g),{class:"btn btn-lg mr-4 rounded-full w-max px-4",to:"/documents/create"},{default:h(()=>[a(l(y),{class:"w-6 lg:mr-1"}),F]),_:1})],512),[[u,!e.isDocumentsAvailable]])],64))}}),G=n({created(){document.title="Documents | Validity.Red"}}),U=n({...G,__name:"DocumentsListView",setup(t){return(e,s)=>(r(),p(C,null,{default:h(()=>[a(q)]),_:1}))}});export{U as default};
//# sourceMappingURL=DocumentsListView-22cb292b.js.map
