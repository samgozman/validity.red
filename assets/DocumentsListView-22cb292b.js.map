{"version":3,"file":"DocumentsListView-22cb292b.js","sources":["../../node_modules/@vicons/ionicons5/es/TrashOutline.js","../../src/components/document/DocumentListItem.vue","../../src/components/document/DocumentsList.vue","../../src/views/DocumentsListView.vue"],"sourcesContent":["import { openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createStaticVNode('<path d=\"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"></path><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"32\" d=\"M80 112h352\" fill=\"currentColor\"></path><path d=\"M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M256 176v224\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M184 176l8 224\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M328 176l-8 224\"></path>', 6)\nconst _hoisted_8 = [_hoisted_2]\nexport default defineComponent({\n  name: 'TrashOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_8)\n  }\n})\n","<script setup lang=\"ts\">\nimport { defineProps } from \"vue\";\nimport { RouterLink } from \"vue-router\";\nimport { TrashOutline } from \"@vicons/ionicons5\";\nimport type { IDocument } from \"./interfaces/IDocument\";\nimport ModalConfirmation from \"../elements/ModalConfirmation.vue\";\nimport { DocumentType } from \"./DocumentType\";\ndefineProps<{\n  document: IDocument;\n}>();\n</script>\n\n<template>\n  <div\n    class=\"card shadow-lg compact bg-base-100\"\n    @mouseover=\"isHovering = true\"\n    @mouseout=\"isHovering = false\"\n  >\n    <div class=\"flex-row items-center space-x-4 card-body\">\n      <div class=\"flex-1 w-[80%]\">\n        <RouterLink :to=\"documentLink\" class=\"card-title text-primary\">\n          <component\n            :is=\"DocumentType.getIcon(document.type)\"\n            class=\"w-5 text-base-content\"\n          ></component>\n          {{ document.title }}\n        </RouterLink>\n        <p class=\"text-base-content text-opacity-80 truncate\">\n          {{ document.description }}\n        </p>\n        <p v-show=\"errorMsg\" class=\"badge badge-error badge-outline w-full\">\n          Error: {{ errorMsg }}\n        </p>\n        <p class=\"text-base-content text-opacity-40\">\n          {{ document.expiresAt }}\n        </p>\n      </div>\n      <div class=\"flex space-x-2 flex-0\" :class=\"{ 'opacity-0': !isHovering }\">\n        <a :href=\"deleteAnchor\" class=\"btn btn-sm btn-circle\">\n          <TrashOutline class=\"w-5\" />\n        </a>\n      </div>\n    </div>\n    <ModalConfirmation\n      :modalId=\"deleteModalId\"\n      message=\"Are you sure that you want to delete this document:\"\n      :actionName=\"document.title\"\n      @confirmEvent=\"deleteDocument\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { DocumentService } from \"./DocumentService\";\nimport { ErrorDecoder } from \"@/services/ErrorDecoder\";\n\nexport default defineComponent({\n  data() {\n    return {\n      isHovering: false,\n      deleteAnchor: \"\",\n      deleteModalId: \"\",\n      documentLink: \"\",\n      errorMsg: \"\",\n    };\n  },\n  methods: {\n    setContext() {\n      this.deleteAnchor = `#delete-${this.document.ID}`;\n      this.deleteModalId = `delete-${this.document.ID}`;\n      this.documentLink = `documents/${this.document.ID}`;\n    },\n    async deleteDocument() {\n      this.errorMsg = \"\";\n      try {\n        await DocumentService.deleteOne(this.document.ID);\n        this.$router.push(\"/documents\");\n        this.$emit(\"refreshDocumentsEvent\");\n      } catch (error) {\n        this.errorMsg = await ErrorDecoder.decode(error);\n      }\n    },\n  },\n  beforeMount() {\n    this.setContext();\n  },\n});\n</script>\n","<script setup lang=\"ts\">\nimport DocumentListItem from \"./DocumentListItem.vue\";\nimport { RouterLink } from \"vue-router\";\nimport { AddOutline } from \"@vicons/ionicons5\";\n</script>\n\n<template>\n  <div v-show=\"errorMsg\" class=\"badge badge-error badge-outline w-full\">\n    Error: {{ errorMsg }}\n  </div>\n  <div\n    v-show=\"isDocumentsAvailable\"\n    class=\"grid grid-cols-1 gap-6 py-6 lg:p-10 md:grid-cols-2 xl:grid-cols-3 lg:bg-base-200 rounded-box\"\n  >\n    <DocumentListItem\n      v-for=\"document in documents\"\n      v-bind:key=\"document.ID\"\n      v-bind:document=\"document\"\n      @refresh-documents-event=\"refresh\"\n    />\n  </div>\n  <div\n    v-show=\"!isDocumentsAvailable\"\n    class=\"grid items-center justify-items-center h-full\"\n  >\n    <RouterLink\n      class=\"btn btn-lg mr-4 rounded-full w-max px-4\"\n      to=\"/documents/create\"\n    >\n      <AddOutline class=\"w-6 lg:mr-1\" />\n      <span class=\"lg:block\">Add first document</span>\n    </RouterLink>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { DocumentService } from \"./DocumentService\";\nimport type { IDocument } from \"./interfaces/IDocument\";\nimport { ErrorDecoder } from \"@/services/ErrorDecoder\";\n\ninterface VueData {\n  documents: IDocument[];\n  isDocumentsAvailable: boolean;\n  errorMsg: string;\n}\n\nexport default defineComponent({\n  data(): VueData {\n    return {\n      documents: [],\n      // To fix button from flickering\n      isDocumentsAvailable: true,\n      errorMsg: \"\",\n    };\n  },\n  methods: {\n    async refresh() {\n      this.errorMsg = \"\";\n      try {\n        const documents = await DocumentService.getAll();\n        this.documents = documents;\n\n        this.isDocumentsAvailable = documents.length > 0;\n      } catch (error) {\n        this.errorMsg = await ErrorDecoder.decode(error);\n      }\n    },\n  },\n  beforeMount() {\n    this.refresh();\n  },\n});\n</script>\n","<script setup lang=\"ts\">\nimport DocumentsList from \"@/components/document/DocumentsList.vue\";\nimport StandardContainer from \"@/components/layout/StandardContainer.vue\";\n</script>\n\n<template>\n  <StandardContainer>\n    <DocumentsList />\n  </StandardContainer>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  created() {\n    document.title = \"Documents | Validity.Red\";\n  },\n});\n</script>\n"],"names":["_hoisted_1","_hoisted_2","_createStaticVNode","_hoisted_8","TrashOutline","defineComponent","_ctx","_cache","_openBlock","_createElementBlock","__default__","DocumentService","error","ErrorDecoder","documents"],"mappings":"6WACA,MAAMA,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACMC,EAA2BC,EAAmB,64BAA84B,CAAC,EAC77BC,EAAa,CAACF,CAAU,EAC9BG,EAAeC,EAAgB,CAC7B,KAAM,eACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAOT,EAAYG,CAAU,CACvE,CACH,CAAC,mMC4CDO,EAAeL,EAAgB,CAC7B,MAAO,CACE,MAAA,CACL,WAAY,GACZ,aAAc,GACd,cAAe,GACf,aAAc,GACd,SAAU,EAAA,CAEd,EACA,QAAS,CACP,YAAa,CACN,KAAA,aAAe,WAAW,KAAK,SAAS,KACxC,KAAA,cAAgB,UAAU,KAAK,SAAS,KACxC,KAAA,aAAe,aAAa,KAAK,SAAS,IACjD,EACA,MAAM,gBAAiB,CACrB,KAAK,SAAW,GACZ,GAAA,CACF,MAAMM,EAAgB,UAAU,KAAK,SAAS,EAAE,EAC3C,KAAA,QAAQ,KAAK,YAAY,EAC9B,KAAK,MAAM,uBAAuB,QAC3BC,GACP,KAAK,SAAW,MAAMC,EAAa,OAAOD,CAAK,CACjD,CACF,CACF,EACA,aAAc,CACZ,KAAK,WAAW,CAClB,CACF,CAAC,osCCxCDF,EAAeL,EAAgB,CAC7B,MAAgB,CACP,MAAA,CACL,UAAW,CAAC,EAEZ,qBAAsB,GACtB,SAAU,EAAA,CAEd,EACA,QAAS,CACP,MAAM,SAAU,CACd,KAAK,SAAW,GACZ,GAAA,CACI,MAAAS,EAAY,MAAMH,EAAgB,SACxC,KAAK,UAAYG,EAEZ,KAAA,qBAAuBA,EAAU,OAAS,QACxCF,GACP,KAAK,SAAW,MAAMC,EAAa,OAAOD,CAAK,CACjD,CACF,CACF,EACA,aAAc,CACZ,KAAK,QAAQ,CACf,CACF,CAAC,gkBC1DDF,EAAeL,EAAgB,CAC7B,SAAU,CACR,SAAS,MAAQ,0BACnB,CACF,CAAC"}